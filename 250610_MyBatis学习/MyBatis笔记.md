mybatis使用总结

1、mapping注解修饰函数的参数，三种注解

- ``@RequestParam``：浏览器发送的数据是简单的数据类型
- ``@RequestBody``：浏览器发送的数据是JSON格式，会通过反射等操作自动转化为类的实例对象
- ``@PathVarible``：接受的是路径中的参数

2、根据需求文档分析mapping注解修饰的函数中传入参数的类型，例如如果是JSON格式，那么传入参数的类型应该是实例类对象（比如按照名称添加部门，文档中写了传入数据类型是JSON格式，所以add函数传入的参数为部门类对象，此时mybatis底层会自动将JSON格式数据转化为类对象，其中注意浏览器前端返回的属性名称应该和类对象属性一致）




xml中编写sql语句的规范：

**在Mybatis中使用XML映射文件方式开发，需要符合一定的规范：**

1. XML映射文件的名称与Mapper接口名称一致，并且将XML映射文件和Mapper接口放置在相同包下（同包同名）
2. XML映射文件的namespace属性为Mapper接口全限定名一致
3. XML映射文件中sql语句的id与Mapper接口中的方法名一致，并保持返回类型一致。


动态sql，两个标签，根据用户的输入确定是否要加入到判断条件中；特别注意判断语句中接受的参数应该是从前端返回的数据，另外应该为类的实体对象添加必要的默认值。


`<if>`：判断条件是否成立，如果条件为true，则拼接SQL。

`<where>`：根据查询条件，来生成where关键字，并会自动去除条件前面多余的and或or。



事务处理，使用 ``@TransActions``注解，默认只处理运行时异常

如果想进行更精细的控制，需要设置注解中的两个属性：指定回滚类型的异常、事务的传播行为

**结论：**

* 在Spring的事务管理中，默认只有运行时异常 RuntimeException才会回滚。
* 如果还需要回滚指定类型的异常，可以通过rollbackFor属性来指定。

```java
@Transactional(rollbackFor = Exception.class)
```

多个事务之间存在调用关系，怎样控制多个事务的关系？

* 有就加入，没有新建
* 无论是否有，都新建（一般见于日志，事务之间不会相互影响）





**八股：**

**补充异常类型**

事务的ACID特性
